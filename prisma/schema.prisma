// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Profile {
  id           String   @id @default(cuid())
  userId       String   // Stack Auth user ID
  name         String
  logo         String
  colors       Json     // { dark: string, light: string, accent: string }
  fonts        Json     // { headline: {...}, body: {...} }
  layout       Json     // { padding: {...}, gaps: {...}, etc. }
  systemPrompt String   @db.Text
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  assets       Asset[]

  @@index([userId])
}

enum AssetType {
  GENERATED
  UNSPLASH
}

model Asset {
  id        String    @id @default(cuid())
  profileId String
  profile   Profile   @relation(fields: [profileId], references: [id], onDelete: Cascade)
  
  type      AssetType
  url       String
  width     Int
  height    Int
  meta      Json      // { prompt?, credit?, etc. }
  
  createdAt DateTime  @default(now())
  
  @@index([profileId])
}
